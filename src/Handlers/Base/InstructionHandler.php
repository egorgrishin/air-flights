<?php
declare(strict_types=1);

namespace App\Handlers\Base;

use App\Contracts\DtoContract;
use App\Enums\State;
use App\Handlers\Handler;

final readonly class InstructionHandler extends Handler
{
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ–ª–∂–µ–Ω –ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å
     */
    public static function validate(DtoContract $dto): bool
    {
        return $dto->data === State::Instruction->value;
    }

    /**
     * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
     */
    public function process(): void
    {
        $text = <<<TEXT
        ‚óè –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ ‚Äî –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É ¬´Start üöÄ¬ª
        ‚óè –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É - –Ω–∞–∂–º–∏ –≤ –º–µ–Ω—é "–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏", –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏ –º–∞—Ä—à—Ä—É—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å, –∏ –Ω–∞–∂–º–∏ –Ω–∞ –Ω–µ–≥–æ. –ì–æ—Ç–æ–≤–æ!

        ‚ùó –ü–æ—á–µ–º—É –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –¥–∞—Ç—É –≤ –º–∞—Ä—à—Ä—É—Ç–µ –∏–ª–∏ –Ω–µ—Ç —Ü–µ–Ω—ã –Ω–∞ –±–∏–ª–µ—Ç? 
        - –ù–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –∏–ª–∏ –º–µ–∂–¥—É —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
        - –ù–∞ –¥–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤
        - –ù–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏—è

        ‚ÅâÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç Air Flights ‚úàÔ∏è?
        - –ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç —Å–∞–º—ã–µ –≤—ã–≥–æ–¥–Ω—ã–µ –±–∏–ª–µ—Ç—ã —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –¥–≤—É—Ö –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–π: ¬´–ü–æ–±–µ–¥–∞¬ª –∏ ¬´Smartavia¬ª ‚Äî –∏ —Å–æ–∑–¥–∞—ë—Ç –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω.
        TEXT;

        $this->telegram->send($this->method, [
            'chat_id' => $this->fromId,
            'text'    => $text,
        ]);
    }

    /**
     * –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ DTO –≤ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
     */
    protected function parseDto(DtoContract $dto): void
    {
    }
}